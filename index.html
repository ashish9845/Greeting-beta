<!DOCTYPE html>
<html lang="en" translate="no">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Greetings</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Load Dancing Script, Inter, and Tangerine fonts from Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Inter:wght@400;700&family=Tangerine:wght@400;700&display=swap"
        rel="stylesheet">

    <!-- Load Nepali Date Converter Library (v3.3.1 which typically exposes 'NepaliDateConverter' or 'NepaliDate') -->
    <script src="https://cdn.jsdelivr.net/npm/nepali-date-converter@3.3.1/dist/nepali-date-converter.umd.js">
    </script>

    <style>
        /* Apply custom background, text color, and Inter font for general text */
        body {
            background-color: #1C1B1F;
            color: #E6E1E5;
            font-family: 'Inter', sans-serif;
        }

        /* Custom style applied specifically to the Greeting Text */
        #greeting-text {
            font-family: 'Dancing Script', cursive;
            transition: all 0.7s ease-out;
            cursor: pointer;
        }

        /* Custom style applied specifically to the Quote Text */
        #quote-text {
            font-family: 'Tangerine', cursive;
            transition: all 0.7s ease-out;
            /* Ensure the typewriter effect cursor blinks */
            border-right: 0.15em solid transparent;
        }

        /* Class for hiding/fading elements when shrinking (Used for English date and Nepali date) */
        .shrunk {
            opacity: 0 !important;
            transform: translateY(-50px) !important;
            transition: all 0.5s ease-in;
            pointer-events: none;
        }

        /* Positioning for elements when the card is active (Quote mode) */
        #time-display.active-state {
            font-size: 2.5rem;
            /* Smaller time display */
            position: absolute;
            top: 2rem;
            left: 50%;
            transform: translateX(-50%);
            transition: all 1s ease-in-out;
        }

        /* New state for combined English date: hide it */
        #english-date-combined.active-state {
            opacity: 0;
            transform: translateY(-30px);
            pointer-events: none;
        }

        #quote-container.active-state {
            opacity: 1;
            transform: scale(1);
            pointer-events: auto;
            /* Ensure the quote container adds spacing and border when active */
            padding-top: 1.5rem;
            /* pt-6 equivalent */
            padding-bottom: 1.5rem;
            /* pb-6 equivalent */
        }

        /* Apply border and padding to main content */
        #main-content {
            transition: all 0.7s ease-out;
            padding-top: 1.5rem;
            padding-bottom: 1.5rem;
        }

        /* When active, remove main content padding/borders */
        #main-content.active-quote-mode {
            border-top: none;
            border-bottom: none;
        }

        /* The header needs a bottom margin/padding to account for the border it no longer has */
        #header-content:not(.active-state) {
            padding-bottom: 1.5rem;
        }

        /* Ensure social icons are always visible and positioned correctly */
        #social-icons {
            opacity: 1;
            pointer-events: auto;
            /* Remove transitions related to hiding/showing */
            transition: none;
        }

        /* Custom style for the BETA badge - Moved outside the card and set to fixed position (viewport relative) */
        .beta-badge {
            /* Position relative to the viewport (fixed) */
            position: fixed;
            /* CHANGED */
            top: 1rem;
            /* Spaced down from the top edge */
            left: 1rem;
            /* Spaced in from the left edge */

            /* Visual style: Changed to Red */
            background-color: #EF4444;
            /* Tailwind red-500 */
            color: white;
            padding: 0.25rem 0.75rem;
            /* Vertical and horizontal padding */
            font-size: 0.875rem;
            /* text-sm */
            font-weight: bold;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            border-radius: 9999px;
            /* Pill shape */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            /* Indicate clickability */
            transition: background-color 0.2s, transform 0.1s;
            z-index: 10;
        }

        .beta-badge:hover {
            background-color: #DC2626;
            /* Tailwind red-600 on hover */
            transform: translateY(-1px);
            /* Slight lift */
        }

        /* Custom styling for the Modal content when closed (for animation) */
        #beta-modal-content {
            transition: all 0.3s ease-out;
            /* Ensures smooth scaling */
        }

        /* Custom style for the Search Container - Fixed to Top-Right (NEW POSITIONING) */
        .search-container {
            position: fixed;
            /* CHANGED from absolute to fixed */
            top: 1rem;
            right: 1rem;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .search-input {
            background-color: #1C1B1F;
            /* Dark background */
            color: #E6E1E5;
            /* Light text */
            border: 1px solid #4B5563;
            /* Gray border */
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            /* Pill shape */
            font-size: 0.875rem;
            width: 150px;
            transition: all 0.2s;
        }

        .search-input:focus {
            outline: none;
            border-color: #A78BFA;
            /* Purple focus ring */
            box-shadow: 0 0 0 3px rgba(167, 139, 250, 0.5);
            width: 200px;
            /* Expand on focus */
        }

        .search-button {
            background-color: #A78BFA;
            /* Purple button */
            color: white;
            padding: 0.5rem;
            border-radius: 9999px;
            transition: background-color 0.2s, transform 0.1s;
            cursor: pointer;
        }

        .search-button:hover {
            background-color: #8B5CF6;
            /* Darker purple on hover */
        }
    </style>
</head>

<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <!-- BETA Indicator Badge (MOVED OUTSIDE MAIN CARD) -->
    <div id="beta-badge" class="beta-badge" onclick="showBetaModal(true)">BETA</div>

    <!-- Search Box Container (MOVED OUTSIDE MAIN CARD, FIXED POSITION) -->
    <div id="search-container" class="search-container">
        <input type="text" id="search-input" placeholder="Search..." class="search-input"
            onkeydown="handleKeydown(event)">
        <button id="search-button" class="search-button" onclick="handleSearch()">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
        </button>
    </div>

    <!-- Main Content Card -->
    <div id="main-card"
        class="bg-[#2D2C31] p-8 md:p-12 lg:p-16 rounded-3xl shadow-2xl w-full max-w-4xl space-y-8 relative overflow-hidden transform transition duration-500 hover:shadow-[0_0_50px_rgba(108,92,231,0.5)]">

        <!-- Header: Dynamic Date and Time -->
        <header id="header-content" class="text-center space-y-2 transition-all duration-700 pt-0 mt-0">
            <!-- Combined English Date: Eg: Friday, Nov 28, 2025 -->
            <p id="english-date-combined"
                class="text-lg md:text-xl text-yellow-300 font-semibold transition-all duration-700">
                Loading English Date...
            </p>

            <!-- Time Display -->
            <p id="time-display"
                class="text-4xl md:text-6xl font-extrabold tracking-wider text-purple-400 transition-all duration-700">
                Loading...
            </p>

            <!-- Nepali Date -->
            <p id="nepali-date" class="text-md md:text-lg text-yellow-500 transition-all duration-700">
                Loading Nepali Date...
            </p>

            <!-- Separator Line between time block and greeting block -->
            <div id="header-separator"
                class="h-px bg-gray-700 w-full mx-auto mt-6 mb-6 transition-opacity duration-500 opacity-0"></div>
        </header>

        <!-- Dynamic Greeting and Quote Section -->
        <main id="main-content" class="text-center transition-all duration-700">
            <!-- Greeting (Clickable to toggle quote rotation) -->
            <h1 id="greeting-text" onclick="toggleQuoteRotation()"
                class="text-4xl md:text-7xl font-bold text-white mb-4 transition-all">
                Loading...
            </h1>

            <!-- Quote Container - Hidden/Scaled down initially -->
            <div id="quote-container" class="opacity-0 scale-90 pointer-events-none transition-all duration-700 mt-6">
                <blockquote class="italic text-gray-400">
                    <p id="quote-text" class="text-2xl md:text-4xl leading-snug">
                        "Click the greeting above to start the inspiration."
                    </p>
                    <cite id="quote-author" class="block text-lg md:text-xl mt-4 text-purple-300 transition-all">
                        â€” Ready
                    </cite>
                </blockquote>
            </div>
        </main>
    </div>

    <!-- Social Media Icons Container - Now permanently visible and active -->
    <div id="social-icons" class="fixed bottom-6 right-4 flex space-x-4 z-20 transition-all duration-500">
        <!-- Instagram Icon -->
        <a href="https://www.instagram.com/_aashish_dahal/" target="_blank" title="Instagram"
            class="text-gray-300 hover:text-pink-500 transition-colors">
            <svg class="w-7 h-7" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect width="20" height="20" x="2" y="2" rx="5" ry="5" />
                <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" />
                <line x1="17.5" x2="17.5" y1="6.5" y2="6.5" />
            </svg>
        </a>

        <!-- Facebook Icon -->
        <a href="https://www.facebook.com/ashish.dahal.555186" target="_blank" title="Facebook"
            class="text-gray-300 hover:text-blue-600 transition-colors">
            <svg class="w-7 h-7" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z" />
            </svg>
        </a>

        <!-- WhatsApp Icon -->
        <a href="https://wa.me/9779865102989" target="_blank" title="WhatsApp"
            class="text-gray-300 hover:text-green-500 transition-colors">
            <svg class="w-7 h-7" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path
                    d="M12 2C6.477 2 2 6.477 2 12c0 1.974.551 3.829 1.551 5.433L2.5 21.5l4.133-1.051C8.171 21.449 10.026 22 12 22c5.523 0 10-4.477 10-10S17.523 2 12 2z" />
                <path d="M12 16c-1.105 0-2-.895-2-2v-4c0-1.105.895-2 2-2h4c1.105 0 2 .895 2 2v4c0 1.105-.895 2-2 2h-4z"
                    fill="currentColor" stroke="none" />
            </svg>
        </a>
    </div>

    <!-- Custom Modal/Message Box for Beta Information or Search Status (Hidden by default, updated for animation) -->
    <div id="beta-modal"
        class="fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4 opacity-0 pointer-events-none transition-opacity duration-300 ease-out">
        <div id="beta-modal-content"
            class="bg-[#2D2C31] p-8 rounded-xl shadow-3xl max-w-sm w-full relative border-2 border-red-500 transform scale-95 transition-all duration-300 ease-out">
            <!-- Close Button -->
            <button onclick="hideBetaModal()"
                class="absolute top-2 right-2 text-gray-400 hover:text-red-400 p-2 rounded-full transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                    </path>
                </svg>
            </button>

            <h2 id="modal-title" class="text-2xl font-bold text-red-400 mb-4">Beta Version Information</h2>
            <p id="modal-body" class="text-gray-300">
                This application is currently in **Beta Version**.
                <br><br>
                New features, updates, and improvements are actively in the developmental phase. Please be aware that
                you might encounter occasional changes or minor issues.
            </p>
        </div>
    </div>

    <!-- JavaScript Logic -->
    <script>
        // --- Configuration & Constants ---

        // The date/time of the last known update for the application
        const LAST_UPDATED_TIMESTAMP_STRING = "November 28, 2025 11:45:00"; // Updated timestamp

        // **Quote auto change timer set to 10 seconds (10000 ms)**
        const QUOTE_PAUSE_TIME_MS = 10000;

        // Fixed set of inspirational quotes and authors
        const QUOTES = [
            { content: "The journey of a thousand miles begins with one step.", author: "Lao Tzu" },
            { content: "Believe you can and you're halfway there.", author: "Theodore Roosevelt" },
            { content: "The only way to do great work is to love what you do.", author: "Steve Jobs" },
            { content: "Success is not final, failure is not fatal: it is the courage to continue that counts.", author: "Winston Churchill" },
            { content: "Your time is limited, don't waste it living someone else's life.", author: "Steve Jobs" },
            { content: "The best time to plant a tree was 20 years ago. The second best time is now.", author: "Chinese Proverb" },
            { content: "Be yourself; everyone else is already taken.", author: "Oscar Wilde" },
            { content: "In the middle of difficulty lies opportunity.", author: "Albert Einstein" },
            { content: "It always seems impossible until itâ€™s done.", author: "Nelson Mandela" },
            { content: "Donâ€™t watch the clock; do what it does. Keep going.", author: "Sam Levenson" },
            { content: "You miss 100% of the shots you donâ€™t take.", author: "Wayne Gretzky" },
            { content: "Act as if what you do makes a difference. It does.", author: "William James" },
            { content: "Start where you are. Use what you have. Do what you can.", author: "Arthur Ashe" },
            { content: "Success usually comes to those who are too busy to be looking for it.", author: "Henry David Thoreau" },
            { content: "Happiness is not something ready made. It comes from your own actions.", author: "Dalai Lama" },
            { content: "Dream big and dare to fail.", author: "Norman Vaughan" }
        ];

        // Global element references
        let greetingTextEl;
        let quoteContainerEl;
        let quoteTextEl;
        let quoteAuthorEl;
        let englishDateCombinedEl;
        let nepaliDateEl;
        let timeDisplayEl;
        let socialIconsEl;
        let mainContentEl;
        let headerSeparatorEl;
        let betaModalEl;
        let betaModalContentEl;
        let modalTitleEl;
        let modalBodyEl;
        let searchInputEl;

        let quoteInterval = null; // Holds the ID for recursive setTimeout
        let currentTypingTimeout = null; // Tracks the active typewriter timeout
        let isQuoteRotationActive = false; // State flag

        // --- Utility Functions ---

        /**
         * Gets a time-based greeting.
         * @returns {string} The appropriate greeting (e.g., "Good Morning!").
         */
        function getGreeting() {
            const hour = new Date().getHours();
            if (hour < 5) return "Good Night! ðŸŒƒ";
            if (hour < 12) return "Good Morning! ðŸŒ…";
            if (hour < 18) return "Good Afternoon! â˜€ï¸";
            return "Good Evening! ðŸŒ™";
        }

        /**
         * Selects a random quote from the QUOTES array, ensuring it's not the same as the current one.
         * @returns {object} A quote object with 'content' and 'author' properties.
         */
        function getRandomQuote() {
            // Filter out the current quote to ensure a different one is selected next
            const currentQuoteText = quoteTextEl.textContent.replace(/"/g, '');
            const availableQuotes = QUOTES.filter(q => q.content !== currentQuoteText);

            // If filtering leaves no options (shouldn't happen with a large list) fall back to full list
            const selectionPool = availableQuotes.length > 0 ? availableQuotes : QUOTES;

            const randomIndex = Math.floor(Math.random() * selectionPool.length);
            return selectionPool[randomIndex];
        }

        // --- Date & Time Functions ---

        /**
         * Function to update time, called every second.
         */
        function updateTime() {
            const now = new Date();
            const timeOptions = {
                hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true
            };
            timeDisplayEl.textContent = now.toLocaleTimeString('en-US', timeOptions);
        }

        /**
         * Function to update dates (English and Nepali).
         * @returns {boolean} True if Nepali date was successfully calculated, false otherwise.
         */
        function updateDates() {
            const now = new Date();

            // 1. English Date (Combined: Eg: Friday, Nov 28, 2025)
            const combinedEnglishOptions = {
                weekday: 'long',
                month: 'short',
                day: 'numeric',
                year: 'numeric'
            };
            englishDateCombinedEl.textContent = now.toLocaleDateString('en-US', combinedEnglishOptions);

            // 2. Nepali Date (FIXED LOGIC with check for both potential global names)
            const DateConstructor = typeof NepaliDateConverter !== 'undefined' ? NepaliDateConverter : (typeof NepaliDate !== 'undefined' ? NepaliDate : null);

            if (DateConstructor) {
                try {
                    // Use the identified constructor
                    const nepaliDateConverter = new DateConstructor(now);
                    // Format the date string
                    const nepaliDateStr = `${nepaliDateConverter.format('MMMM D, YYYY')} B.S.`;
                    nepaliDateEl.textContent = nepaliDateStr;
                    nepaliDateEl.classList.remove('text-red-500'); // Remove error style if successful
                    return true; // Success
                } catch (e) {
                    // This error indicates the converter loaded but failed to process the date object.
                    console.error("Error converting to Nepali date:", e);
                    nepaliDateEl.textContent = "Nepali Date: Conversion Error.";
                    nepaliDateEl.classList.add('text-red-500');
                    return false;
                }
            } else {
                // This indicates the script hasn't fully loaded or defined its global object yet.
                nepaliDateEl.textContent = "Nepali Date: Loading...";
                nepaliDateEl.classList.add('text-yellow-500');
                return false;
            }
        }

        /**
         * Waits for the Nepali Date Library to load before setting up the interval.
         */
        function initializeDatesWithRetry() {
            const success = updateDates();

            if (success) {
                // Now that the date is loaded, set the interval for subsequent updates every minute
                setInterval(updateDates, 60000);
                console.log("Nepali Date initialized successfully.");
            } else {
                // If unsuccessful (likely because the library hasn't loaded), retry after 200ms
                setTimeout(initializeDatesWithRetry, 200);
            }
        }

        /**
         * Starts the clock and date intervals.
         */
        function startClockAndDates() {
            // 1. Time updates (always works)
            updateTime();
            setInterval(updateTime, 1000);

            // 2. Date updates (uses retry logic)
            initializeDatesWithRetry();
        }

        // --- Typewriter and Quote Rotation Logic ---

        /**
         * Simulates a typewriter effect by typing text character by character.
         */
        function typeWriter(text, element, speed = 40, callback = () => { }) {
            let i = 0;
            element.textContent = ''; // Clear existing text

            // Clear any previous typewriter timeout before starting a new one
            if (currentTypingTimeout) {
                clearTimeout(currentTypingTimeout);
            }

            // Start the cursor blinking (by changing border color)
            element.style.borderColor = '#E6E1E5';

            function type() {
                if (i < text.length) {
                    element.textContent += text.charAt(i);
                    i++;
                    currentTypingTimeout = setTimeout(type, speed); // Store the ID
                } else {
                    currentTypingTimeout = null; // Clear ID when done
                    element.style.borderColor = 'transparent'; // Stop cursor blinking
                    callback();
                }
            }
            type();
        }

        /**
         * Displays the next quote and schedules the subsequent one recursively.
         */
        function displayNextQuote() {
            // Reset author visibility and content
            quoteAuthorEl.style.opacity = '0';
            quoteAuthorEl.textContent = '';

            // Clear any ongoing typing or pending quote interval
            if (currentTypingTimeout) {
                clearTimeout(currentTypingTimeout);
                currentTypingTimeout = null;
            }
            if (quoteInterval) {
                clearTimeout(quoteInterval);
                quoteInterval = null;
            }

            const quote = getRandomQuote();

            // 1. Type out the quote content
            typeWriter(`"${quote.content}"`, quoteTextEl, 40, () => {
                // 2. Once quote is typed, set and fade in the author
                quoteAuthorEl.textContent = `â€” ${quote.author}`;
                quoteAuthorEl.style.transition = 'opacity 0.5s ease-in 0.5s';
                quoteAuthorEl.style.opacity = '1';

                // 3. Schedule the next quote after the pause time (10 seconds)
                if (isQuoteRotationActive) {
                    quoteInterval = setTimeout(displayNextQuote, QUOTE_PAUSE_TIME_MS);
                }
            });
        }

        /**
         * Stops the quote rotation.
         */
        function stopQuoteRotation() {
            isQuoteRotationActive = false;
            // Clear the recursive timeout
            if (quoteInterval) {
                clearTimeout(quoteInterval);
                quoteInterval = null;
            }
            // Clear the active typewriter timeout
            if (currentTypingTimeout) {
                clearTimeout(currentTypingTimeout);
                currentTypingTimeout = null;
            }
            // Clear text and author when stopping
            quoteTextEl.textContent = 'Click the greeting above to start the inspiration.';
            quoteAuthorEl.textContent = 'â€” Ready';
            quoteAuthorEl.style.opacity = '1'; // Keep "Ready" visible
        }

        /**
         * Sets the main card state (Expanded/Active or Collapsed/Inactive).
         * @param {boolean} shouldActivate True to activate the quote rotation, false to revert.
         */
        function setQuoteRotationState(shouldActivate) {
            isQuoteRotationActive = shouldActivate;

            if (shouldActivate) {
                // 1. Shrink/Move Header elements and hide dates
                englishDateCombinedEl.classList.add('active-state'); // Hide English date
                nepaliDateEl.classList.add('shrunk'); // Hide Nepali date

                // SHOW the separator when quote mode is active
                headerSeparatorEl.classList.remove('opacity-0');

                // 2. Remove default border/padding from main content and move Time to the top
                mainContentEl.classList.add('active-quote-mode'); // Use a custom class for active mode
                timeDisplayEl.classList.add('active-state'); // Absolute position time

                // 3. Make Quote container visible and activate rotation
                quoteContainerEl.classList.add('active-state');

                // Delay quote start slightly
                setTimeout(displayNextQuote, 700);

            } else {
                // 1. Restore Header elements
                englishDateCombinedEl.classList.remove('active-state');
                nepaliDateEl.classList.remove('shrunk');

                // HIDE the separator when quote mode is inactive
                headerSeparatorEl.classList.add('opacity-0');

                // 2. Restore default border/padding and Time position
                mainContentEl.classList.remove('active-quote-mode');
                timeDisplayEl.classList.remove('active-state');

                // 3. Hide Quote container and stop rotation
                quoteContainerEl.classList.remove('active-state');

                stopQuoteRotation();
            }
        }

        /**
         * Toggles the quote rotation state on greeting click.
         */
        function toggleQuoteRotation() {
            setQuoteRotationState(!isQuoteRotationActive);
        }

        // --- Modal Functions (Shared for Beta Info and Search Status) ---

        /**
         * Sets the modal content back to the default Beta info.
         */
        function resetModalContentToBeta() {
            modalTitleEl.textContent = "Beta Version Information";
            modalTitleEl.classList.remove('text-purple-400');
            modalTitleEl.classList.add('text-red-400');

            modalBodyEl.innerHTML = `
                This application is currently in **Beta Version**.
                <br><br>
                New features, updates, and improvements are actively in the developmental phase. Please be aware that you might encounter occasional changes or minor issues.
            `;
            betaModalContentEl.classList.remove('border-purple-500');
            betaModalContentEl.classList.add('border-red-500');
        }

        /**
         * Shows the Modal with animation.
         * @param {boolean} isBetaMode If true, sets content to static Beta text. If false, uses current dynamic content (for search/status).
         */
        function showBetaModal(isBetaMode = false) {
            if (betaModalEl && betaModalContentEl) {
                if (isBetaMode) {
                    resetModalContentToBeta();
                }

                // 1. Make container visible and start fade in
                betaModalEl.classList.remove('opacity-0', 'pointer-events-none');

                // 2. Start scale up animation on the content
                betaModalContentEl.classList.remove('scale-95');
                betaModalContentEl.classList.add('scale-100');
            }
        }

        /**
         * Hides the Modal with animation.
         */
        function hideBetaModal() {
            if (betaModalEl && betaModalContentEl) {
                // 1. Start transition by scaling down
                betaModalContentEl.classList.remove('scale-100');
                betaModalContentEl.classList.add('scale-95');

                // 2. After scale transition completes (300ms), fade out the container
                setTimeout(() => {
                    betaModalEl.classList.add('opacity-0', 'pointer-events-none');
                }, 300); // Wait for CSS transition duration
            }
        }

        // --- Search Functions (NEW) ---

        /**
         * Displays a temporary message using the modal structure for search status.
         * @param {string} message The message to display.
         */
        function showTemporaryMessage(message) {
            // Set content for search status
            modalTitleEl.textContent = "Search Status";
            modalTitleEl.classList.remove('text-red-400');
            modalTitleEl.classList.add('text-purple-400');
            modalBodyEl.innerHTML = message;

            // Change border to match the search button color
            betaModalContentEl.classList.remove('border-red-500');
            betaModalContentEl.classList.add('border-purple-500');

            // Show the modal
            showBetaModal(false);

            // Hide the modal automatically after 3 seconds
            setTimeout(hideBetaModal, 3000);
        }

        /**
         * Handles the search action.
         */
        function handleSearch() {
            const query = searchInputEl.value.trim();

            if (query.length > 0) {
                console.log(`Search performed for: "${query}"`);
                showTemporaryMessage(`Feature is in development: Searched for **"${query}"**`);
            } else {
                showTemporaryMessage("Please enter a search query.");
            }
            // Clear input after search attempt
            searchInputEl.value = '';
        }

        /**
         * Handles the Enter key press event in the search box.
         */
        function handleKeydown(event) {
            if (event.key === 'Enter') {
                event.preventDefault(); // Prevent default form submission
                handleSearch();
            }
        }


        // --- Initialization ---

        function initializeApp() {
            // Get DOM elements
            greetingTextEl = document.getElementById('greeting-text');
            quoteContainerEl = document.getElementById('quote-container');
            quoteTextEl = document.getElementById('quote-text');
            quoteAuthorEl = document.getElementById('quote-author');
            englishDateCombinedEl = document.getElementById('english-date-combined');
            nepaliDateEl = document.getElementById('nepali-date');
            timeDisplayEl = document.getElementById('time-display');
            socialIconsEl = document.getElementById('social-icons');
            mainContentEl = document.getElementById('main-content');
            headerSeparatorEl = document.getElementById('header-separator');
            betaModalEl = document.getElementById('beta-modal');
            betaModalContentEl = document.getElementById('beta-modal-content');
            modalTitleEl = document.getElementById('modal-title');
            modalBodyEl = document.getElementById('modal-body');
            searchInputEl = document.getElementById('search-input');

            // Set initial greeting
            greetingTextEl.textContent = getGreeting();

            // Start the clock and date intervals, includes retry logic for Nepali Date
            startClockAndDates();

            // Log the update time to the console
            logLastUpdated();
        }

        /**
         * Logs the last updated timestamp to the console.
         */
        function logLastUpdated() {
            const date = new Date(LAST_UPDATED_TIMESTAMP_STRING);

            if (isNaN(date.getTime())) {
                console.error("Could not parse last updated timestamp.");
                return;
            }

            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const datePart = `${year}/${month}/${day}`;

            let hours = date.getHours();
            const minutes = String(date.getMinutes()).padStart(2, '0');
            const ampm = hours >= 12 ? 'PM' : 'AM';

            hours = hours % 12;
            hours = hours ? hours : 12;
            const hoursStr = String(hours).padStart(2, '0');

            const timePart = `${hoursStr}:${minutes} ${ampm}`;

            console.log(`Page Last Updated: ${datePart}-${timePart}`);
        }

        window.onload = initializeApp;

        // Expose functions globally for HTML onclick
        window.toggleQuoteRotation = toggleQuoteRotation;
        window.setQuoteRotationState = setQuoteRotationState;
        window.displayNextQuote = displayNextQuote;
        window.showBetaModal = showBetaModal;
        window.hideBetaModal = hideBetaModal;
        window.handleSearch = handleSearch;
        window.handleKeydown = handleKeydown;
    </script>
</body>

</html>