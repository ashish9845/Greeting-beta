<!DOCTYPE html>
<html lang="en" translate="no">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Greetings</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Load Dancing Script, Inter, and Tangerine fonts from Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Inter:wght@400;700&family=Tangerine:wght@400;700&display=swap"
        rel="stylesheet">

    <!-- Load Nepali Date Converter Library -->
    <script src="https://cdn.jsdelivr.net/npm/nepali-date-converter@3.3.1/dist/nepali-date-converter.umd.js">
    </script>

    <style>
        /* Apply custom background, text color, and Inter font for general text */
        body {
            background-color: #1C1B1F;
            color: #E6E1E5;
            font-family: 'Inter', sans-serif;
        }

        /* Custom style applied specifically to the Greeting Text */
        #greeting-text,
        #author-text {
            font-family: 'Dancing Script', cursive;
            transition: all 0.7s ease-out;
        }

        /* Custom style applied specifically to the Quote Text */
        #quote-text {
            font-family: 'Tangerine', cursive;
            transition: all 0.7s ease-out;
        }

        /* Class for sliding the author text away */
        .slide-away {
            transform: translateX(100vw);
            opacity: 0;
        }

        /* Custom scrollbar styling (optional, for aesthetics) */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #2D2C31;
        }

        ::-webkit-scrollbar-thumb {
            background: #6C5CE7;
            border-radius: 10px;
        }
    </style>
</head>

<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <!-- Main Content Card -->
    <div id="main-card"
        class="bg-[#2D2C31] p-8 md:p-12 lg:p-16 rounded-3xl shadow-2xl w-full max-w-4xl space-y-8 relative overflow-hidden transform transition duration-500 hover:shadow-[0_0_50px_rgba(108,92,231,0.5)]">

        <!-- Header: Dynamic Date and Time -->
        <header class="text-center space-y-2">
            <!-- English Date and Time -->
            <p id="english-date" class="text-lg md:text-xl text-yellow-300 font-semibold"></p>
            <p id="time-display" class="text-4xl md:text-6xl font-extrabold tracking-wider text-purple-400"></p>
            <!-- Nepali Date -->
            <p id="nepali-date" class="text-md md:text-lg text-yellow-500"></p>
        </header>

        <!-- Dynamic Greeting and Quote Section -->
        <main class="text-center pt-6 pb-6 border-t border-b border-gray-700">
            <!-- Greeting -->
            <h1 id="greeting-text" class="text-4xl md:text-7xl font-bold text-white mb-4 transition-all">
                Loading...
            </h1>
            <!-- Quote -->
            <blockquote class="italic text-gray-400 mt-6">
                <p id="quote-text" class="text-2xl md:text-4xl leading-snug">
                    "A dream is a wish your heart makes."
                </p>
                <cite id="author-text" class="block text-lg md:text-xl mt-4 text-purple-300 transition-all">
                    — Walt Disney
                </cite>
            </blockquote>
        </main>

        <!-- Controls -->
        <footer class="flex justify-center space-x-4">
            <!-- Button to generate new content -->
            <button onclick="animateGreetingAndTime()"
                class="flex items-center space-x-2 bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-xl 
                       transition duration-300 ease-in-out shadow-lg transform hover:scale-[1.05] focus:outline-none focus:ring-4 focus:ring-purple-500 focus:ring-opacity-50">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                    stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.75 9.815 9.815 0 00.322-1.672M8.79 3.092L4.992 6.89m0 0h4.992m-4.993 0l3.181-3.183a8.25 8.25 0 0113.803 3.75 9.815 9.815 0 01.322 1.672" />
                </svg>
                <span>New Greeting</span>
            </button>
            <!-- Button to toggle the info modal -->
            <button onclick="toggleModal(true)"
                class="flex items-center space-x-2 bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-xl 
                       transition duration-300 ease-in-out shadow-lg transform hover:scale-[1.05] focus:outline-none focus:ring-4 focus:ring-gray-500 focus:ring-opacity-50">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                    stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.782 1.341a.57.57 0 00.916.634l1.39-1.39a.57.57 0 01.634.916l1.34 1.34a.75.75 0 01.852 1.063l-.02.041V21a2.25 2.25 0 01-2.25 2.25h-2.25A2.25 2.25 0 0112 21v-8.25a.75.75 0 01.75-.75h.75zM12 3a9 9 0 100 18A9 9 0 0012 3zm0 3a1.5 1.5 0 110 3 1.5 1.5 0 010-3z" />
                </svg>
                <span>Info</span>
            </button>
        </footer>
    </div>

    <!-- Modal for Introduction/Information (Hidden by default) -->
    <div id="introModal"
        class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 hidden transition-opacity duration-300 opacity-0"
        onclick="toggleModal(false)">
        <div id="modalContentWrapper" class="bg-[#2D2C31] p-8 rounded-3xl shadow-xl w-full max-w-sm"
            onclick="event.stopPropagation()">
            <!-- Modal content will be injected here by JavaScript -->
        </div>
    </div>

    <!-- JavaScript Logic -->
    <script>
        // --- Configuration ---

        // The date/time of the last known update for the application
        const LAST_UPDATED_TIMESTAMP_STRING = "November 28, 2025 10:26:00";

        // Fixed set of inspirational quotes and authors
        const QUOTES = [
            { quote: "The best way to predict the future is to create it.", author: "Peter Drucker" },
            { quote: "Strive not to be a success, but rather to be of value.", author: "Albert Einstein" },
            { quote: "The mind is everything. What you think you become.", author: "Buddha" },
            { quote: "The only limit to our realization of tomorrow will be our doubts of today.", author: "Franklin D. Roosevelt" },
            { quote: "Happiness is not something readymade. It comes from your own actions.", author: "Dalai Lama" },
            { quote: "The purpose of our lives is to be happy.", author: "Dalai Lama" },
        ];

        // Global variables for elements
        let greetingTextEl;
        let quoteTextEl;
        let authorTextEl;
        let englishDateEl;
        let nepaliDateEl;
        let timeDisplayEl;
        let introModalEl;
        let modalContentWrapperEl;

        // --- Utility Functions ---

        /**
         * Gets a time-based greeting.
         * @returns {string} The appropriate greeting (e.g., "Good Morning!").
         */
        function getGreeting() {
            const hour = new Date().getHours();
            if (hour < 5) return "Good Night!";
            if (hour < 12) return "Good Morning!";
            if (hour < 18) return "Good Afternoon!";
            return "Good Evening!";
        }

        /**
         * Selects a random quote from the QUOTES array.
         * @returns {object} A quote object with 'quote' and 'author' properties.
         */
        function getRandomQuote() {
            const randomIndex = Math.floor(Math.random() * QUOTES.length);
            return QUOTES[randomIndex];
        }

        // --- Core Update Functions ---

        /**
         * Updates the date and time displays (English and Nepali).
         */
        function updateDateAndTime() {
            const now = new Date();

            // 1. English Date & Time
            const dateOptions = {
                weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
            };
            englishDateEl.textContent = now.toLocaleDateString('en-US', dateOptions);

            const timeOptions = {
                hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true
            };
            timeDisplayEl.textContent = now.toLocaleTimeString('en-US', timeOptions);

            // 2. Nepali Date (Requires NepaliDateConverter library)
            if (typeof NepaliDateConverter !== 'undefined') {
                try {
                    const nepaliDate = new NepaliDateConverter(now);
                    const nepaliDateStr = `${nepaliDate.getYear()} / ${nepaliDate.getMonthName()} / ${nepaliDate.getDate()} - ${nepaliDate.getDayName()}`;
                    nepaliDateEl.textContent = `Nepali Date: ${nepaliDateStr}`;
                } catch (e) {
                    console.error("Error converting to Nepali date:", e);
                    nepaliDateEl.textContent = "Nepali Date: Error";
                }
            } else {
                nepaliDateEl.textContent = "Nepali Date: Library Not Loaded";
            }
        }

        /**
         * Animates the display of a new greeting and quote.
         */
        function animateGreetingAndTime() {
            // 1. Apply slide-away transition to author
            slideAwayAuthor();

            // 2. Animate the greeting and quote change
            greetingTextEl.classList.add('opacity-0', 'scale-95');
            quoteTextEl.classList.add('opacity-0', 'scale-95');

            // Wait for transition to complete, then update content
            setTimeout(() => {
                // Update Greeting
                greetingTextEl.textContent = getGreeting();

                // Update Quote
                const { quote, author } = getRandomQuote();
                quoteTextEl.textContent = `"${quote}"`;

                // Update Author
                authorTextEl.textContent = `— ${author}`;
                authorTextEl.classList.remove('slide-away'); // Bring author back in

                // Bring elements back
                greetingTextEl.classList.remove('opacity-0', 'scale-95');
                quoteTextEl.classList.remove('opacity-0', 'scale-95');
            }, 500); // Must match CSS transition duration
        }

        /**
         * Slides the author text element away (pre-transition for new quote).
         */
        function slideAwayAuthor() {
            authorTextEl.classList.add('slide-away');
        }

        /**
         * Starts the clock and date interval updates.
         */
        function startClockAndDates() {
            // Initial run to populate fields immediately
            updateDateAndTime();
            animateGreetingAndTime();

            // Set interval for continuous time updates
            setInterval(updateDateAndTime, 1000); // Update every second
        }

        // --- Modal/UI Functions ---

        /**
         * Toggles the visibility of the introductory modal.
         * @param {boolean} show If true, shows the modal; if false, hides it.
         */
        function toggleModal(show) {
            if (show) {
                introModalEl.classList.remove('hidden');
                // Use a timeout to trigger CSS transition for opacity
                setTimeout(() => introModalEl.classList.add('opacity-100'), 10);
            } else {
                introModalEl.classList.remove('opacity-100');
                // Wait for the opacity transition to complete before hiding
                setTimeout(() => introModalEl.classList.add('hidden'), 300);
            }
            // If hiding, also remove the 'initial-show' class to prevent showing on reload
            if (!show && localStorage.getItem('introModalShown') !== 'true') {
                localStorage.setItem('introModalShown', 'true');
            }
        }

        /**
         * Initializes the modal content and displays it if it hasn't been shown before.
         */
        function initializeIntroModal() {
            // Get DOM elements
            greetingTextEl = document.getElementById('greeting-text');
            quoteTextEl = document.getElementById('quote-text');
            authorTextEl = document.getElementById('author-text');
            englishDateEl = document.getElementById('english-date');
            nepaliDateEl = document.getElementById('nepali-date');
            timeDisplayEl = document.getElementById('time-display');
            introModalEl = document.getElementById('introModal');
            modalContentWrapperEl = document.getElementById('modalContentWrapper');

            // Define the modal content (Updated to remove specified text)
            const modalContent = `
                <h3 class="text-2xl font-bold mb-3 text-yellow-300">Welcome to Greetings!</h3>
                <p class="mb-6 text-gray-300">
                    This single-file web application demonstrates various dynamic features.
                </p>
                <button id="closeModalBtn" 
                        class="w-full bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-3 px-4 rounded-xl 
                                transition duration-300 ease-in-out shadow-lg transform hover:scale-[1.01] focus:outline-none focus:ring-4 focus:ring-yellow-500 focus:ring-opacity-50">
                    Get Started
                </button>
            `;

            // Inject content
            modalContentWrapperEl.innerHTML = modalContent;

            // Check if the user has seen the modal before (using localStorage)
            const hasModalBeenShown = localStorage.getItem('introModalShown') === 'true';

            // Show modal on first visit only
            if (!hasModalBeenShown) {
                toggleModal(true);
            }

            // Attach event listener to the "Get Started" button
            const closeModalBtn = document.getElementById('closeModalBtn');
            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', () => toggleModal(false));
            }
        }

        /**
         * Logs the last updated timestamp to the console.
         */
        function logLastUpdated() {
            const date = new Date(LAST_UPDATED_TIMESTAMP_STRING);

            if (isNaN(date.getTime())) {
                console.error("Could not parse last updated timestamp.");
                return;
            }

            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const datePart = `${year}/${month}/${day}`;

            let hours = date.getHours();
            const minutes = String(date.getMinutes()).padStart(2, '0');
            const ampm = hours >= 12 ? 'PM' : 'AM';

            hours = hours % 12;
            hours = hours ? hours : 12;
            const hoursStr = String(hours).padStart(2, '0');

            const timePart = `${hoursStr}:${minutes} ${ampm}`;

            console.log(`Page Last Updated: ${datePart}-${timePart}`);
        }

        // --- Initialization ---

        window.onload = function () {
            // Initialize and manage the one-time introductory modal
            initializeIntroModal();

            // Start the clock and date intervals
            startClockAndDates();

            // Log the update time to the console
            logLastUpdated();
        };

        // Expose functions globally for HTML onclick
        window.animateGreetingAndTime = animateGreetingAndTime;
        window.slideAwayAuthor = slideAwayAuthor;
        window.toggleModal = toggleModal;
    </script>
</body>

</html>